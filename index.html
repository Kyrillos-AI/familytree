<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">
  <head>
    <link rel="manifest" href="manifest.json" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="theme-color" content="#064e3b" />
    <link rel="icon" href="logo.png" type="image/png" />
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>ุดุฌุฑุฉ ุงูุนุงุฆูุฉ</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/ar.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="loader-wrapper">
      <div class="logo-loader-container">
        <div class="logo-glow-ring"></div>
        <img src="logo.png" class="loader-logo-img" alt="Logo" />
        <div class="loading-bar-container">
          <div class="loading-bar-progress"></div>
        </div>
        <div class="loader-status-text">ุฌุงุฑู ูุฒุงููุฉ ุงูุณูุงูุฉ...</div>
      </div>
    </div>
    <div class="bg-glow"></div>

    <div class="main-wrapper">
      <header class="navbar glass">
        <div
          class="nav-logo"
          onclick="window.showFullTree()"
          style="cursor: pointer"
        >
          <img src="logo.png" class="logo-img" alt="Logo" />
        </div>

        <div class="search-wrapper">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-user-round-search-icon lucide-user-round-search"
          >
            <circle cx="10" cy="8" r="5" />
            <path d="M2 21a8 8 0 0 1 10.434-7.62" />
            <circle cx="18" cy="18" r="3" />
            <path d="m22 22-1.9-1.9" />
          </svg>
          <input
            type="text"
            id="search-input"
            placeholder=" ุงุจุญุซ ุนู ูุฑุฏ..."
            oninput="window.searchMember()"
          />
          <div id="search-results" class="search-results"></div>
        </div>

        <div class="nav-controls">
          <button class="btn-icon" onclick="window.showFullTree()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-trees"
            >
              <path
                d="M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z"
              ></path>
              <path d="M7 16v6"></path>
              <path d="M13 19v3"></path>
              <path
                d="M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5"
              ></path>
            </svg>
            <span class="nav-btn-label">ุงูุฑุฆูุณูุฉ</span>
          </button>
          <button class="btn-icon" onclick="window.toggleMaternalRelatives()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-eye-off-icon lucide-eye-off"
            >
              <path
                d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"
              />
              <path d="M14.084 14.158a3 3 0 0 1-4.242-4.242" />
              <path
                d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"
              />
              <path d="m2 2 20 20" />
            </svg>
            <span class="nav-btn-label" id="maternal-label">ุงูุงุฑุจ ุงูุงู</span>
          </button>
          <button class="btn-icon" onclick="window.openRelCalc()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-scan-search-icon lucide-scan-search"
            >
              <path d="M3 7V5a2 2 0 0 1 2-2h2" />
              <path d="M17 3h2a2 2 0 0 1 2 2v2" />
              <path d="M21 17v2a2 2 0 0 1-2 2h-2" />
              <path d="M7 21H5a2 2 0 0 1-2-2v-2" />
              <circle cx="12" cy="12" r="3" />
              <path d="m16 16-1.9-1.9" />
            </svg>
            <span class="nav-btn-label">ุงููุฑุงุจุฉ</span>
          </button>
          <button class="btn-icon" onclick="window.toggleTheme()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-moon theme-icon-dark"
            >
              <path
                d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"
              />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-sun theme-icon-light"
            >
              <circle cx="12" cy="12" r="4" />
              <path d="M12 2v2" />
              <path d="M12 20v2" />
              <path d="M4.93 4.93l1.41 1.41" />
              <path d="M17.66 17.66l1.41 1.41" />
              <path d="M2 12h2" />
              <path d="M20 12h2" />
              <path d="M4.93 19.07l1.41-1.41" />
              <path d="M17.66 6.34l1.41-1.41" />
            </svg>
            <span class="nav-btn-label">ุงููุถุน</span>
          </button>
          <button class="btn-icon" onclick="window.exportTreeImage()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-camera"
            >
              <path
                d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"
              />
              <circle cx="12" cy="13" r="3" />
            </svg>
            <span class="nav-btn-label">ุตูุฑุฉ</span>
          </button>
          <button class="btn-icon" onclick="window.showStatsModal()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-chart-no-axes-combined-icon lucide-chart-no-axes-combined"
            >
              <path d="M12 16v5" />
              <path d="M16 14v7" />
              <path d="M20 10v11" />
              <path
                d="m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15"
              />
              <path d="M4 18v3" />
              <path d="M8 14v7" />
            </svg>
            <span class="nav-btn-label">ุฅุญุตุงุฆูุงุช</span>
          </button>
          <button class="btn-icon" onclick="window.goBack()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-chevron-left-icon lucide-chevron-left"
            >
              <path d="m15 18-6-6 6-6" />
            </svg>
          </button>
        </div>
      </header>

      <div class="tree-wrapper">
        <svg id="tree-svg">
          <defs>
            <linearGradient
              id="line-gradient"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop
                offset="0%"
                style="stop-color: var(--primary-glow); stop-opacity: 1"
              />
              <stop
                offset="100%"
                style="stop-color: var(--secondary-glow); stop-opacity: 1"
              />
            </linearGradient>
          </defs>
        </svg>
        <div class="tree-container" id="tree-container"></div>
      </div>
    </div>

    <div id="bio-modal" class="modal">
      <div class="modal-content glass">
        <span class="close-btn" onclick="window.closeBio()">&times;</span>

        <div id="view-section">
          <div class="profile-header">
            <div class="image-wrapper">
              <img id="modal-img" src="" alt="ุตูุฑุฉ ุงููุฑุฏ" />
              <div class="image-glow"></div>
            </div>
            <div class="profile-info">
              <h2 id="modal-name"></h2>
              <div id="modal-father" class="profile-subtext"></div>
              <div id="modal-age" class="profile-subtext"></div>
              <div id="extra-info-badges" class="badges-container"></div>
            </div>
          </div>

          <span id="modal-id-display" style="display: none"></span>

          <div class="modal-row-actions">
            <button
              class="action-item"
              onclick="window.switchProfile()"
              title="ุนุฑุถ ุงูููุธูุฑ"
            >
              <div class="icon-box primary">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-eye-icon lucide-eye"
                >
                  <path
                    d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"
                  />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              <span>ุงูููู ุงูุดุฎุตู</span>
            </button>
            <button
              class="action-item"
              onclick="window.toggleAddSection(true)"
              title="ุฅุถุงูุฉ ูุฑูุจ"
            >
              <div class="icon-box success">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-user-round-plus-icon lucide-user-round-plus"
                >
                  <path d="M2 21a8 8 0 0 1 13.292-6" />
                  <circle cx="10" cy="8" r="5" />
                  <path d="M19 16v6" />
                  <path d="M22 19h-6" />
                </svg>
              </div>
              <span>ุฅุถุงูุฉ ูุฑูุจ</span>
            </button>
            <button
              class="action-item"
              onclick="window.toggleEditSection(true)"
              title="ุชุนุฏูู"
            >
              <div class="icon-box secondary">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-user-round-pen-icon lucide-user-round-pen"
                >
                  <path d="M2 21a8 8 0 0 1 10.821-7.487" />
                  <path
                    d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"
                  />
                  <circle cx="10" cy="8" r="5" />
                </svg>
              </div>
              <span> ุชุนุฏูู ุจูุงูุงุช</span>
            </button>

            <button
              class="action-item danger"
              onclick="window.deleteMember()"
              title="ุญุฐู"
            >
              <div class="icon-box danger">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-user-round-x-icon lucide-user-round-x"
                >
                  <path d="M2 21a8 8 0 0 1 11.873-7" />
                  <circle cx="10" cy="8" r="5" />
                  <path d="m17 17 5 5" />
                  <path d="m22 17-5 5" />
                </svg>
              </div>
              <span>ุญุฐู</span>
            </button>
            <button
              class="action-item"
              onclick="window.shareMember()"
              title="ูุดุงุฑูุฉ"
            >
              <div class="icon-box warning">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-share-2"
                >
                  <circle cx="18" cy="5" r="3" />
                  <circle cx="6" cy="12" r="3" />
                  <circle cx="18" cy="19" r="3" />
                  <line x1="8.59" x2="15.42" y1="13.51" y2="17.49" />
                  <line x1="15.41" x2="8.59" y1="6.51" y2="10.49" />
                </svg>
              </div>
              <span>ูุดุงุฑูุฉ</span>
            </button>
            <div class="social-dropdown">
              <button class="action-item">
                <div class="icon-box info">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-link-icon lucide-link"
                  >
                    <path
                      d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                    />
                    <path
                      d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                    />
                  </svg>
                </div>
                <span>ูุณุงุฆู ุชูุงุตู</span>
              </button>
              <div class="social-menu">
                <a id="link-fb" href="#" target="_blank">ููุณุจูู</a>
                <a id="link-inst" href="#" target="_blank">ุฅูุณุชุฌุฑุงู</a>
                <a id="link-tt" href="#" target="_blank">ุชูู ุชูู</a>
                <a id="link-wa" href="#" target="_blank">ูุงุชุณ ุงุจ</a>
              </div>
            </div>
          </div>
        </div>
        <div id="add-section" style="display: none">
          <h3 class="modal-title">ุฅุถุงูุฉ ูุฑูุจ ุฌุฏูุฏ</h3>

          <div class="compact-form">
            <div class="flex-row-equal">
              <div class="input-group-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-user"
                >
                  <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
                <input type="text" id="new-name" placeholder="ุงูุงุณู" />
              </div>
              <div class="input-group-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-calendar"
                >
                  <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                  <line x1="16" x2="16" y1="2" y2="6" />
                  <line x1="8" x2="8" y1="2" y2="6" />
                  <line x1="3" x2="21" y1="10" y2="10" />
                </svg>
                <input
                  type="date"
                  id="new-dob"
                  placeholder="ุชุงุฑูุฎ ุงููููุงุฏ"
                  title="ุชุงุฑูุฎ ุงููููุงุฏ"
                />
              </div>
            </div>
            <div class="flex-row">
              <select id="new-gender" class="mini-input">
                <option value="male">ุฐูุฑ</option>
                <option value="female">ุฃูุซู</option>
              </select>
              <select id="relation-type" class="mini-input">
                <option value="parent">ุฃุจ / ุฃู</option>
                <option value="sibling">ุฃุฎ / ุฃุฎุช</option>
                <option value="spouse">ุฒูุฌ / ุฒูุฌุฉ</option>
                <option value="child">ุงุจู / ุงุจูุฉ</option>
                <option value="uncle_aunt">ุนู / ุนูู</option>
                <option value="maternal_sibling">ุฎุงู / ุฎุงูุฉ</option>
              </select>
            </div>
            <div class="input-group-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-image"
              >
                <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                <circle cx="9" cy="9" r="2" />
                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
              </svg>
              <input
                type="text"
                id="new-img"
                placeholder="ุฑุงุจุท ุงูุตูุฑุฉ (ุงุฎุชูุงุฑู)"
              />
            </div>

            <div
              class="input-group-icon"
              style="
                border: 1px solid var(--secondary-glow);
                background: rgba(168, 85, 247, 0.05);
              "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                class="lucide lucide-link-2"
              >
                <path d="M9 17H7A5 5 0 0 1 7 7h2" />
                <path d="M15 7h2a5 5 0 0 1 0 10h-2" />
                <line x1="8" x2="16" y1="12" y2="12" />
              </svg>
              <select id="new-existing-member">
                <option value="">-- ุฃู ุงุฎุชุฑ ุดุฎุต ููุฌูุฏ ููุฑุจุท --</option>
              </select>
            </div>
            <p
              style="
                font-size: 0.7rem;
                text-align: center;
                margin-top: -5px;
                opacity: 0.6;
              "
            >
              (ุงุชุฑููุง ูุงุฑุบุฉ ุฅุฐุง ููุช ุณุชุถูู ุงุณูุงู ุฌุฏูุฏุงู)
            </p>
            <div class="dynamic-social-container">
              <div id="new-social-list" class="social-list"></div>
              <div class="center-wrapper">
                <button
                  class="btn-add-link-small"
                  onclick="window.addSocialRow('new')"
                >
                  โ ุฅุถุงูุฉ ูุณููุฉ ุชูุงุตู
                </button>
              </div>
            </div>

            <div class="mini-switch-wrapper">
              <label class="switch-small">
                <input type="checkbox" id="new-hide-main" checked />
                <span class="slider-small round"></span>
              </label>
              <span>ุฅุฎูุงุก ุชููุงุฆู</span>
            </div>
            <button
              id="new-mark-deceased-btn"
              class="btn-secondary"
              onclick="window.enableDeceasedMode('new')"
              style="
                width: 100%;
                margin: 10px 0;
                border: 1px solid #bdc3c7;
                color: #7f8c8d;
              "
            >
              ุชุณุฌูู ุญุงูุฉ ููุงุฉ ๐ด
            </button>

            <input type="checkbox" id="new-is-deceased" style="display: none" />

            <div
              id="new-death-date-wrapper"
              class="input-group-icon"
              style="
                display: none;
                border-color: #bdc3c7;
                background: rgba(0, 0, 0, 0.05);
              "
            >
              <span style="font-size: 0.9rem; margin-left: 8px"
                >ุชุงุฑูุฎ ุงูููุงุฉ ๐ด:</span
              >
              <input type="date" id="new-death-date" />
            </div>
          </div>

          <div class="modal-actions-modern flex-row-buttons">
            <button class="btn-confirm" onclick="window.addNewRelative()">
              ุชุฃููุฏ ุงูุฅุถุงูุฉ โ
            </button>
            <button class="btn-cancel" onclick="window.toggleAddSection(false)">
              ุฑุฌูุน โ
            </button>
          </div>
        </div>
        <div id="edit-section" style="display: none">
          <h3 class="modal-title">ุชุนุฏูู ุงูุจูุงูุงุช</h3>
          <div class="compact-form">
            <div class="flex-row">
              <div class="input-group-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-user-round-icon lucide-user-round"
                >
                  <circle cx="12" cy="8" r="5" />
                  <path d="M20 21a8 8 0 0 0-16 0" />
                </svg>
                <input type="text" id="edit-name" placeholder="ุงูุงุณู ุงููุงูู" />
              </div>
              <div class="input-group-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-calendar-days"
                >
                  <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                  <line x1="16" x2="16" y1="2" y2="6" />
                  <line x1="8" x2="8" y1="2" y2="6" />
                  <line x1="3" x2="21" y1="10" y2="10" />
                  <path d="M8 14h.01" />
                  <path d="M12 14h.01" />
                  <path d="M16 14h.01" />
                  <path d="M8 18h.01" />
                  <path d="M12 18h.01" />
                  <path d="M16 18h.01" />
                </svg>
                <input
                  type="date"
                  id="edit-dob"
                  placeholder="ุชุงุฑูุฎ ุงููููุงุฏ"
                  title="ุชุงุฑูุฎ ุงููููุงุฏ"
                />
              </div>
            </div>
            <div class="input-group-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-image-up-icon lucide-image-up"
              >
                <path
                  d="M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"
                />
                <path d="m14 19.5 3-3 3 3" />
                <path d="M17 22v-5.5" />
                <circle cx="9" cy="9" r="2" />
              </svg>
              <input type="text" id="edit-img" placeholder="ุฑุงุจุท ุงูุตูุฑุฉ" />
              <button
                class="btn-reset-img"
                onclick="window.resetPhotoField('edit')"
                title="ุญุฐู ุงูุตูุฑุฉ ูุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-trash2-icon lucide-trash-2"
                >
                  <path d="M10 11v6" />
                  <path d="M14 11v6" />
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
                  <path d="M3 6h18" />
                  <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                </svg>
              </button>
            </div>

            <div class="input-group-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                />
                <path
                  d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                />
              </svg>
              <select id="edit-existing-spouse">
                <option value="">ุฑุจุท ุจุฒูุฌ/ุฒูุฌุฉ ููุฌูุฏ</option>
              </select>
            </div>

            <div class="dynamic-social-container">
              <div id="edit-social-list" class="social-list"></div>
              <div class="center-wrapper">
                <button
                  class="btn-add-link-small"
                  onclick="window.addSocialRow('edit')"
                >
                  โ ุฅุถุงูุฉ ูุณููุฉ ุชูุงุตู
                </button>
              </div>
            </div>
            <div class="mini-switch-wrapper">
              <label class="switch-small">
                <input type="checkbox" id="edit-hide-main" />
                <span class="slider-small round"></span>
              </label>

              <span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-eye-off-icon lucide-eye-off"
                >
                  <path
                    d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"
                  />
                  <path d="M14.084 14.158a3 3 0 0 1-4.242-4.242" />
                  <path
                    d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"
                  />
                  <path d="m2 2 20 20" />
                </svg>
                ุฅุฎูุงุก ูู ุงูุดุฌุฑุฉ
              </span>
            </div>
            <button
              id="edit-mark-deceased-btn"
              class="btn-secondary"
              onclick="window.enableDeceasedMode('edit')"
              style="
                width: 100%;
                margin: 10px 0;
                border: 1px solid #bdc3c7;
                color: #7f8c8d;
              "
            >
              ุชุณุฌูู ุญุงูุฉ ููุงุฉ ๐ด
            </button>

            <input
              type="checkbox"
              id="edit-is-deceased"
              style="display: none"
            />

            <div
              id="edit-death-date-wrapper"
              class="input-group-icon"
              style="
                display: none;
                border-color: #bdc3c7;
                background: rgba(0, 0, 0, 0.05);
              "
            >
              <span style="font-size: 0.9rem; margin-left: 8px"
                >ุชุงุฑูุฎ ุงูููุงุฉ ๐ด:</span
              >
              <input type="date" id="edit-death-date" />
            </div>
          </div>

          <div class="modal-actions-modern flex-row-buttons">
            <button class="btn-confirm" onclick="window.saveEdit()">
              ุญูุธ โ
            </button>
            <button
              class="btn-cancel"
              onclick="window.toggleEditSection(false)"
            >
              ุฅูุบุงุก โ
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="rel-calc-modal" class="modal">
      <div class="modal-content glass" style="max-width: 500px">
        <span
          class="close-btn"
          onclick="document.getElementById('rel-calc-modal').style.display='none'"
          >&times;</span
        >
        <h3 class="modal-title">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="#00ff91"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-users-round-icon lucide-users-round"
          >
            <path d="M18 21a8 8 0 0 0-16 0" />
            <circle cx="10" cy="8" r="5" />
            <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3" />
          </svg>
          <br />
          ูุงุดู ุตูุฉ ุงููุฑุงุจุฉ
        </h3>

        <div class="compact-form">
          <div class="calc-main-row">
            <div class="search-wrapper-modal">
              <input
                type="text"
                id="input-person-b"
                placeholder="ุงูุดุฎุต ุงูุฃูู..."
                oninput="window.searchForCalc('b')"
              />
              <div id="results-person-b" class="modal-search-results"></div>
              <input type="hidden" id="id-person-b" />
            </div>
            <div class="calc-label">ู/ุชูุฑุจ ูู</div>
            <div class="search-wrapper-modal">
              <input
                type="text"
                id="input-person-a"
                placeholder="ุงูุดุฎุต ุงูุซุงูู..."
                oninput="window.searchForCalc('a')"
              />
              <div id="results-person-a" class="modal-search-results"></div>
              <input type="hidden" id="id-person-a" />
            </div>
          </div>

          <div class="center-wrapper">
            <button
              class="btn-swap-calc"
              onclick="window.swapCalcPersons()"
              title="ุชุจุฏูู ุงูุฃูุงูู"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-arrow-left-right"
              >
                <path d="M8 3 4 7l4 4" />
                <path d="M4 7h16" />
                <path d="m16 21 4-4-4-4" />
                <path d="M20 17H4" />
              </svg>
            </button>
          </div>

          <div
            id="rel-result-box"
            class="rel-result-centered"
            style="display: none"
          >
            <p id="rel-result-text"></p>
          </div>
        </div>

        <div class="modal-actions-modern" style="margin-top: 15px">
          <button class="btn-confirm" onclick="window.calculateRelationship()">
            ๐ฎูุดู ุงููุฑุงุจู๐ฎ
          </button>
        </div>
      </div>
    </div>
    <div id="custom-alert-overlay" class="alert-overlay">
      <div class="custom-alert glass">
        <div class="alert-icon">โ๏ธ</div>
        <p id="custom-alert-message"></p>
        <button class="btn-confirm" onclick="window.closeCustomAlert()">
          ูููุช โ
        </button>
      </div>
    </div>
    <div id="custom-confirm-overlay" class="alert-overlay">
      <div class="custom-alert glass">
        <div class="alert-icon">๐๏ธ</div>
        <p id="custom-confirm-message">ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุฑุฏุ</p>
        <div class="modal-actions-modern">
          <button class="btn-confirm" id="confirm-yes">ูุนูุ ุงุญุฐู ๐๏ธ</button>
          <button class="btn-cancel" onclick="window.closeCustomConfirm()">
            ุฅูุบุงุก โ
          </button>
        </div>
      </div>
    </div>
    <script type="module" src="script.js"></script>
    <button
      id="tutorial-btn"
      onclick="window.startTour()"
      title="ุฏููู ุงูุงุณุชุฎุฏุงู"
    >
      <span class="pulse-ring"></span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="10" />
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
        <path d="M12 17h.01" />
      </svg>
    </button>

    <div id="tour-overlay">
      <div id="tour-highlight-box"></div>
      <div id="tour-tooltip">
        <h3 id="tour-title">ุนููุงู ุงูุฎุทูุฉ</h3>
        <p id="tour-desc">ุดุฑุญ ุงูุฎุทูุฉ ููุง...</p>
        <div class="tour-controls">
          <span id="tour-step-count">1 / 5</span>
          <div style="display: flex; gap: 10px">
            <button onclick="window.endTour()" class="btn-tour-skip">
              ุฎุฑูุฌ
            </button>
            <button onclick="window.nextTourStep()" class="btn-tour-next">
              ุงูุชุงูู โฏ
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
